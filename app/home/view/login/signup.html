{extend name="layout/index" /} 
{block name="titile"}
  <title>{$C['sitename']}-注册账号 </title>
{/block}
{block name="content"}
<div class="content">
	<div class="panel panel-register">
		<div class="container box">
			<div class="register">
				<div class="register-primary">
					<form action="{:request()->url()}" method="post" id="signup">
						<div class="form-group mb0">
							<label class="control-label">&nbsp;</label>
							<div class="help-block">
								<h2 class="text-dark">欢迎注册<span>已有账号？<a class="text-blue" href="{:url('home/Login/login')}">请登录</a></span></h2>
							</div>
						</div>
						<div class="form-group mb0">
							<label class="control-label">&nbsp;</label>
							<div class="help-block form-error" id="sign-error">
							</div>
						</div>
						<div class="sr-only">
							<input type="text" name="fakeusernameremembered"><input type="password" name="fakepasswordremembered">
							<p>
								防止浏览器自动乱填充表单
							</p>
						</div>
						<div class="form-group">
							<label class="control-label" for="username">用户名：</label><input type="text" class="form-control" id="username" name="username" reg="^[A-Za-z0-9]{6,20}$" maxlength="20" placeholder="您的帐户名和登录名" null="用户名不能为空" err="用户名格式错误">
							<div class="help-block">
								<span class="onshow"><i class="iconfont"></i>支持字母、数字的组合，6-20个字符，不支持中文</span>
							</div>
						</div>
						<div class="form-group">
							<label class="control-label" for="newpsw">设置密码：</label><input type="password" class="form-control" id="newpsw" name="newpsw" reg="^[A-Za-z0-9_-~!@#$%^&amp;*()\[\]_+-={}?,.\/]{6,20}$" maxlength="20" placeholder="必须至少使用两种字符组合" null="请输入密码">
							<div class="help-block">
								<span class="onshow"><i class="iconfont"></i>建议使用字母、数字和符号两种及以上的组合，6-20个字符</span>
								<div class="security-level" id="setpass_security">
									<span class="text-blue" data-tip="<div class='password-suggestion'><h5>密码设置建议</h5><p class='text-red'>据统计研究，80%的被盗账号都是由于密码太简单而被猜到引起的。</p><p><strong>因此，我们建议：</strong></p><p>1. 密码设置至少6位以上，由数字、字母和符号混合而成，安全性最高；</p><p>2. 不允许空格，不允许特殊字符，如；<>;'\。 <br/>    允许的符号为： ~!@#$%^&*()_+-={}[]?/,.；</p><p>3. 不要使用7位以下的纯数字，这样容易被人猜到；</p><p>4. 不要和用户名太相似，这样容易被人猜到；</p><p>5. 不要用太多连续或重复的字符（如：1234、abcd、3333、 ssss等）；</p><p>6. 不要用手机号、电话号码、生日、学号、身份证号等个人信息。</p><p style='font-weight:bold'>友情提醒：用户名和密码要做好相应记录，以免忘记</p></div>"><i class="iconfont"></i>安全程度：</span><span class="levs"><span class="lev lev1">弱</span><span class="lev lev2">中</span><span class="lev lev3">强</span></span><span class="text"><span class="txt1">弱</span><span class="txt2">中</span><span class="txt3">强</span></span>
							</div>
						</div>
					</div>
					<div class="form-group">
						<label class="control-label" for="verifypsw">确认密码：</label><input type="password" class="form-control" id="verifypsw" name="verifypsw" placeholder="请再次输入密码" null="请输入确认密码">
						<div class="help-block">
							<span class="onshow"><i class="iconfont"></i>请再次输入登录密码</span>
						</div>
					</div>
					<div class="form-group">
						<label class="control-label" for="qq">联系QQ：</label><input type="number" class="form-control" id="qq" name="qq" placeholder="请输入QQ号码" null="请输入qq">
						<div class="help-block">
							<span class="onshow"><i class="iconfont"></i>填写QQ方便管理员与你的联系</span>
						</div>
					</div>
					<div class="form-group">
						<label class="control-label" for="phoneno">手机号码：</label><input type="text" class="form-control" id="phoneno" name="phoneno" placeholder="请输入手机号码" reg="^1[23456789]{1}\d{9}$" null="请输入手机号码">
						<div class="help-block">
							<span class="onshow"><i class="iconfont"></i>完成验证后，你可以用该手机登录和找回密码</span>
						</div>
					</div>
					<div class="form-group">
						<label class="control-label" for="verifycode">右侧验证码：</label>
						<div class="form-element">
							<input type="text" id="regcode" class="form-control" name="regcode" placeholder="请输入验证码" value="" null="请输入验证码"><img src="{:captcha_src()}" class="verifyimg code pull-left" onclick="this.src=this.src+'?'+Math.random()" title="点击图片刷新验证码">	
						</div>
					</div>
					<div class="form-group">
						<label class="control-label" for="codeno">短信验证码：</label><input class="form-control form-control-short" id="codeno" name="codeno" type="text" placeholder="手机验证码" null="请输入手机验证码" reg="[0-9]{6}"><a class="btn btn-green" href="javascript:;" data-href="{:url('home/Api/sendMsg',['scene'=>'regcode','tip'=>'mcode'])},,top-left,post" id="mcode">获取验证码</a>
						<div class="help-block">
							<span class="onshow"><i class="iconfont"></i>请输入收到的手机短信验证码</span>
						</div>
					</div>
					<div class="form-group hidden">
						<label class="control-label">&nbsp;</label><label class="checkbox referee-checkbox pull-left"><input type="checkbox" id="user-referee"><span class="checkbox-text">使用推广号</span></label><input type="hidden" name="refer" value="">
					</div>
					<div class="form-group mb0">
						<label class="control-label">&nbsp;</label><label class="checkbox pull-left" for="agreement" data-tip="<span class='fsz16 text-purple'>阅读和同意用户服务协议和隐私政策后才能注册！</span>"><input type="checkbox" id="agreement" ><span class="checkbox-text" >已阅读并同意「<a class="text-blue" target="_blank" href="{:url('home/helpfaq/danye',['id'=>18])}">{$C.sitename}用户服务协议</a>」和「<a class="text-blue" href="{:url('home/helpfaq/danye',['id'=>19])}">隐私政策</a>」</span></label>
					</div>
					<div class="form-group">
					    {:token_field()}
						<label class="control-label">&nbsp;</label><button class="btn btn-primary btn-block btn-md" type="submit" data-form="top-left,json" name="signup" id="signupbtn">同意协议并创建帐户</button>
					</div>
					<div class="form-group">
						<label class="control-label">&nbsp;</label>
						<div class="login-other">
							<fieldset class="orline">
								<legend class="orline-title" align="center">使用其他登录方式</legend>
							</fieldset>
							<a class="login-other-qzone {eq name='isqq' value='0'}hidden{/eq}" href="javascript:;" target="_top" rel="nofollow" onclick="toQzoneLogin();"><i class="iconfont iconfont-qq"></i>QQ帐号直接登录</a>
							<a class="login-other-wechat {eq name='iswx' value='0'}hidden{/eq}" href="javascript:;" target="_top" rel="nofollow" onclick="towxLogin();"><i class="iconfont iconfont-wechat"></i>微信帐号直接登录</a>
						</div>
					</div>
				</form>
				<script>
				$("#agreement").click(function(){var a=$(this).prop("checked");if(a){$("input[name=refer]").val(1);}else{$("input[name=refer]").val(0);}});
				$(function() {$('#newpsw').keyup(function () { var strongRegex = new RegExp("^(?=.{8,})(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*\\W).*$", "g"); var mediumRegex = new RegExp("^(?=.{7,})(((?=.*[A-Z])(?=.*[a-z]))|((?=.*[A-Z])(?=.*[0-9]))|((?=.*[a-z])(?=.*[0-9]))).*$", "g"); var enoughRegex = new RegExp("(?=.{6,}).*", "g"); if (false == enoughRegex.test($(this).val())) { $('#setpass_security').hide(); $('#setpass_security').removeClass('security-level-weak'); $('#setpass_security').removeClass('security-level-medium'); $('#setpass_security').removeClass('security-level-strong'); /*密码小于六位的时候，密码强度图片都为灰色*/} else if (strongRegex.test($(this).val())) { $('#setpass_security').show(); $('#setpass_security').removeClass('security-level-weak'); $('#setpass_security').removeClass('security-level-medium'); $('#setpass_security').removeClass('security-level-strong'); $('#setpass_security').addClass('security-level-strong');  /*密码为八位及以上并且字母数字特殊字符三项都包括,强度最强 */} else if (mediumRegex.test($(this).val())) { $('#setpass_security').show(); $('#setpass_security').removeClass('security-level-weak'); $('#setpass_security').removeClass('security-level-medium'); $('#setpass_security').removeClass('security-level-strong'); $('#setpass_security').addClass('security-level-medium');  /*密码为七位及以上并且字母、数字、特殊字符三项中有两项，强度是中等 */} else { $('#setpass_security').show(); $('#setpass_security').removeClass('security-level-weak'); $('#setpass_security').removeClass('security-level-medium'); $('#setpass_security').removeClass('security-level-strong'); $('#setpass_security').addClass('security-level-weak');  /*如果密码为6为及以下，就算字母、数字、特殊字符三项都包括，强度也是弱的 */} return true; }); });</script>
			</div>
		</div>
	</div>
</div>
</div>
{/block}